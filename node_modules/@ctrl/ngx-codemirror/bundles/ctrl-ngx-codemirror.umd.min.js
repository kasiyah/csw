!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define("@ctrl/ngx-codemirror",["exports","@angular/core","@angular/forms"],t):t(((e=e||self).ctrl=e.ctrl||{},e.ctrl["ngx-codemirror"]={}),e.ng.core,e.ng.forms)}(this,(function(e,t,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function r(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c}function n(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function i(e){return e?e.replace(/\r\n|\r/g,"\n"):e}var c=function(){function e(e,o){this._differs=e,this._ngZone=o,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new t.EventEmitter,this.focusChange=new t.EventEmitter,this.scroll=new t.EventEmitter,this.drop=new t.EventEmitter,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=function(e){},this.onTouched=function(){}}var c;return c=e,Object.defineProperty(e.prototype,"options",{set:function(e){this._options=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeMirrorGlobal",{get:function(){return this._codeMirror?this._codeMirror:(this._codeMirror=require("codemirror"),this._codeMirror)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.ref&&this._ngZone.runOutsideAngular((function(){e.codeMirror=e.codeMirrorGlobal.fromTextArea(e.ref.nativeElement,e._options),e.codeMirror.on("cursorActivity",(function(t){return e._ngZone.run((function(){return e.cursorActive(t)}))})),e.codeMirror.on("scroll",e.scrollChanged.bind(e)),e.codeMirror.on("blur",(function(){return e._ngZone.run((function(){return e.focusChanged(!1)}))})),e.codeMirror.on("focus",(function(){return e._ngZone.run((function(){return e.focusChanged(!0)}))})),e.codeMirror.on("change",(function(t,o){return e._ngZone.run((function(){return e.codemirrorValueChanged(t,o)}))})),e.codeMirror.on("drop",(function(t,o){e._ngZone.run((function(){return e.dropFiles(t,o)}))})),e.codeMirror.setValue(e.value)}))},e.prototype.ngDoCheck=function(){var e=this;if(this._differ){var t=this._differ.diff(this._options);t&&(t.forEachChangedItem((function(t){return e.setOptionIfChanged(t.key,t.currentValue)})),t.forEachAddedItem((function(t){return e.setOptionIfChanged(t.key,t.currentValue)})),t.forEachRemovedItem((function(t){return e.setOptionIfChanged(t.key,t.currentValue)})))}},e.prototype.ngOnDestroy=function(){this.codeMirror&&this.codeMirror.toTextArea()},e.prototype.codemirrorValueChanged=function(e,t){"setValue"!==t.origin&&(this.value=e.getValue(),this.onChange(this.value))},e.prototype.setOptionIfChanged=function(e,t){this.codeMirror&&this.codeMirror.setOption(e,t)},e.prototype.focusChanged=function(e){this.onTouched(),this.isFocused=e,this.focusChange.emit(e)},e.prototype.scrollChanged=function(e){this.scroll.emit(e.getScrollInfo())},e.prototype.cursorActive=function(e){this.cursorActivity.emit(e)},e.prototype.dropFiles=function(e,t){this.drop.emit([e,t])},e.prototype.writeValue=function(e){if(null!=e)if(this.codeMirror){var t=this.codeMirror.getValue();if(e!==t&&i(t)!==i(e))if(this.value=e,this.preserveScrollPosition){var o=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(o.left,o.top)}else this.codeMirror.setValue(this.value)}else this.value=e},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e,this.setOptionIfChanged("readOnly",this.disabled)},e.ctorParameters=function(){return[{type:t.KeyValueDiffers},{type:t.NgZone}]},r([t.Input(),n("design:type",Object)],e.prototype,"className",void 0),r([t.Input(),n("design:type",Object)],e.prototype,"name",void 0),r([t.Input(),n("design:type",Object)],e.prototype,"autoFocus",void 0),r([t.Input(),n("design:type",Object),n("design:paramtypes",[Object])],e.prototype,"options",null),r([t.Input(),n("design:type",Object)],e.prototype,"preserveScrollPosition",void 0),r([t.Output(),n("design:type",Object)],e.prototype,"cursorActivity",void 0),r([t.Output(),n("design:type",Object)],e.prototype,"focusChange",void 0),r([t.Output(),n("design:type",Object)],e.prototype,"scroll",void 0),r([t.Output(),n("design:type",Object)],e.prototype,"drop",void 0),r([t.ViewChild("ref",{static:!0}),n("design:type",t.ElementRef)],e.prototype,"ref",void 0),e=c=r([t.Component({selector:"ngx-codemirror",template:'\n    <textarea\n      [name]="name"\n      class="ngx-codemirror {{ className }}"\n      [class.ngx-codemirror--focused]="isFocused"\n      autocomplete="off"\n      [autofocus]="autoFocus"\n      #ref\n    >\n    </textarea>\n  ',providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return c})),multi:!0}],preserveWhitespaces:!1,changeDetection:t.ChangeDetectionStrategy.OnPush}),n("design:paramtypes",[t.KeyValueDiffers,t.NgZone])],e)}(),s=function(){function e(){}return e=r([t.NgModule({exports:[c],declarations:[c]})],e)}();e.CodemirrorComponent=c,e.CodemirrorModule=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ctrl-ngx-codemirror.umd.min.js.map